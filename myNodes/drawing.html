<!-- drawContours -->
<script type="text/javascript">
  RED.nodes.registerType("draw contours",{
    category: 'drawing',
    color: '#e389b9',
    defaults: {
      broker: {value:"", type:"my-mqtt-broker", required:true},
      index: {value: "-1"},
      randColors: {value: false},
      colorVal: {value: "#000000"},
      thickness: {value: "1"},
      lineType: {value: "8"}
    },
    inputs:1,
    inputLabels: "",
    outputs:1,
    outputLabels: "img",
    icon: "",
    oneditprepare: handleRandColorsCheckbox,
    label: function() {
      return this.name||"draw contours";
    }
  });

function handleRandColorsCheckbox(){
  let checked = document.getElementById('node-input-randColors').checked;
  document.getElementById('node-input-colorVal').parentElement.hidden = !!checked;
  // hide if randColors is checked
}

</script>

<!-- drawContours -->
<script type="text/html" data-template-name="draw contours">
  <div class="form-row">
    <label for="node-input-broker"><i class="fa fa-tag"></i> Broker</label>
    <input id="node-input-broker">
  </div>
  <div class="form-row">
    <label for="node-input-index"><i class="fa fa-tag"></i> index</label>
    <input type="number" id="node-input-index" min=-1 step=1>
  </div>
  <div class="form-row">
    <label for="node-input-randColors"><i class="fa fa-tag"></i> randColors</label>
    <input type="checkbox" id="node-input-randColors" oninput="handleRandColorsCheckbox()">
  </div>
  <div class="form-row">
    <label for="node-input-colorVal"><i class="fa fa-tag"></i> Color</label>
    <input type="color" id="node-input-colorVal">
  </div>
  <div class="form-row">
    <label for="node-input-thickness"><i class="fa fa-tag"></i> thickness</label>
    <input type="number" id="node-input-thickness" min=1>
  </div>
  <div class="form-row">
    <label for="node-input-lineType"><i class="fa fa-tag"></i> Line type</label>
    <select id="node-input-lineType">
      <option value="4">LINE_4</option>
      <option value="8">LINE_8</option>
      <option value="16">LINE_AA</option>
    </select>
  </div>
</script>

<script type="text/html" data-help-name="draw contours">
  <p>
    Draws contours' outlines or filled contours.
  </p><p>
    The function draws contour outlines in the image if thicknessâ‰¥0 or fills the
    area bounded by the contours if thickness<0.
  </p>
  <h3>Inputs</h3>
    <ul>
      <li>payload.img: The image on which the contours will be drawn
      <li>payload.contour or payload.contourList
    </ul>
  <h3>Arguments</h3>
    <ul>
      <li>index: Indicates which contour to draw. If it is negative, all the contours are drawn.
      <li>randColors [bool]: Use of random colors for drawing each contour.
      <li>color: In case randColors = False, which color to use to draw the contours.
        If a 3 channeled color is given, with a grayscale image as input, the output
        going to be 3 channeled.
      <li>thickness: Thickness of lines the contours are drawn with
      <li>line type
    </ul>
  <h3>Outputs</h3>
    <ol>
      <li>payload [img]: Grayscale, or colored in case the input image was colored,
        or a 3 channeled color was given.
    </ol>
</script>


<!-- drawLines -->
<script type="text/javascript">
  RED.nodes.registerType("draw lines",{
    category: 'drawing',
    color: '#e389b9',
    defaults: {
      broker: {value:"", type:"my-mqtt-broker", required:true},
      randColors: {value: false},
      colorVal: {value: "#000000"},
      thickness: {value: "1"},
      lineType: {value: "8"}
    },
    inputs:1,
    inputLabels: "img, lineList",
    outputs:1,
    outputLabels: "img",
    icon: "",
    oneditprepare: handleRandColorsCheckbox,
    label: function() {
      return this.name||"draw lines";
    }
  });
</script>

<!-- drawLines -->
<script type="text/html" data-template-name="draw lines">
  <div class="form-row">
    <label for="node-input-broker"><i class="fa fa-tag"></i> Broker</label>
    <input id="node-input-broker">
  </div>
  <div class="form-row">
    <label for="node-input-randColors"><i class="fa fa-tag"></i> randColors</label>
    <input type="checkbox" id="node-input-randColors" oninput="handleRandColorsCheckbox()">
  </div>
  <div class="form-row">
    <label for="node-input-colorVal"><i class="fa fa-tag"></i> Color</label>
    <input type="color" id="node-input-colorVal">
  </div>
  <div class="form-row">
    <label for="node-input-thickness"><i class="fa fa-tag"></i> thickness</label>
    <input type="number" id="node-input-thickness" min=1>
  </div>
  <div class="form-row">
    <label for="node-input-lineType"><i class="fa fa-tag"></i> Line type</label>
    <select id="node-input-lineType">
      <option value="4">LINE_4</option>
      <option value="8">LINE_8</option>
      <option value="16">LINE_AA</option>
    </select>
  </div>
</script>

<script type="text/html" data-help-name="draw lines">
  <p>Draws line segments on an image. </p>
  <h3>Inputs</h3>
    <ul>
      <li>payload.img: The image on which the lines will be drawn
      <li>payload.line or payload.lineList
    </ul>
  <h3>Arguments</h3>
    <ul>
      <li>randColors [bool]: Use of random colors for drawing each line.
      <li>color: In case randColors = False, which color to use to draw the lines.
        If a 3 channeled color is given, with a grayscale image as input, the output
        going to be 3 channeled.
      <li>thickness
      <li>line type
    </ul>
  <h3>Outputs</h3>
    <ol>
      <li>payload [img]: Grayscale, or colored in case the input image was colored,
        or a 3 channeled color was given.
    </ol>
</script>


<!-- drawCircles -->
<script type="text/javascript">
  RED.nodes.registerType("draw circles",{
    category: 'drawing',
    color: '#e389b9',
    defaults: {
      broker: {value:"", type:"my-mqtt-broker", required:true},
      randColors: {value: false},
      colorVal: {value: "#000000"},
      thickness: {value: "1"},
      lineType: {value: "8"}
    },
    inputs:1,
    inputLabels: "img, circleList",
    outputs:1,
    outputLabels: "img",
    icon: "",
    oneditprepare: handleRandColorsCheckbox,
    label: function() {
      return this.name||"draw circles";
    }
  });
</script>

<!-- drawCircles -->
<script type="text/html" data-template-name="draw circles">
  <div class="form-row">
    <label for="node-input-broker"><i class="fa fa-tag"></i> Broker</label>
    <input id="node-input-broker">
  </div>
  <div class="form-row">
    <label for="node-input-randColors"><i class="fa fa-tag"></i> randColors</label>
    <input type="checkbox" id="node-input-randColors" oninput="handleRandColorsCheckbox()">
  </div>
  <div class="form-row">
    <label for="node-input-colorVal"><i class="fa fa-tag"></i> Color</label>
    <input type="color" id="node-input-colorVal">
  </div>
  <div class="form-row">
    <label for="node-input-thickness"><i class="fa fa-tag"></i> thickness</label>
    <input type="number" id="node-input-thickness" min=1>
  </div>
  <div class="form-row">
    <label for="node-input-lineType"><i class="fa fa-tag"></i> Line type</label>
    <select id="node-input-lineType">
      <option value="4">LINE_4</option>
      <option value="8">LINE_8</option>
      <option value="16">LINE_AA</option>
    </select>
  </div>
</script>

<script type="text/html" data-help-name="draw circles">
  <p>Draws circles on an image. </p>
  <h3>Inputs</h3>
    <ul>
      <li>payload.img: The image on which the circles will be drawn
      <li>payload.circle or payload.circleList
    </ul>
  <h3>Arguments</h3>
    <ul>
      <li>randColors [bool]: Use of random colors for drawing each circle.
      <li>color: In case randColors = False, which color to use to draw the circles.
        If a 3 channeled color is given, with a grayscale image as input, the output
        going to be 3 channeled.
      <li>thickness
      <li>line type
    </ul>
  <h3>Outputs</h3>
    <ol>
      <li>payload [img]: Grayscale, or colored in case the input image was colored,
        or a 3 channeled color was given.
    </ol>
</script>


<!-- drawBBs -->
<script type="text/javascript">
  RED.nodes.registerType("draw bounding box",{
    category: 'drawing',
    color: '#e389b9',
    defaults: {
      broker: {value:"", type:"my-mqtt-broker", required:true},
      randColors: {value: false},
      colorVal: {value: "#000000"},
      ww : {value: ""},
      hh : {value: ""},
      thickness: {value: "1"},
      lineType: {value: "8"}
    },
    inputs:1,
    inputLabels: "",
    outputs:1,
    outputLabels: "img",
    icon: "",
    oneditprepare: handleRandColorsCheckbox,
    label: function() {
      return this.name||"draw bounding box";
    }
  });
</script>

<!-- drawBBs -->
<script type="text/html" data-template-name="draw bounding box">
  <div class="form-row">
    <label for="node-input-broker"><i class="fa fa-tag"></i> Broker</label>
    <input id="node-input-broker">
  </div>
  <div class="form-row">
    <label for="node-input-randColors"><i class="fa fa-tag"></i> randColors</label>
    <input type="checkbox" id="node-input-randColors" oninput="handleRandColorsCheckbox()">
  </div>
  <div class="form-row">
    <label for="node-input-colorVal"><i class="fa fa-tag"></i> Color</label>
    <input type="color" id="node-input-colorVal">
  </div>
  <div class="form-row">
    <label for="node-input-thickness"><i class="fa fa-tag"></i> Thickness</label>
    <input type="number" id="node-input-thickness" min=1>
  </div>
  <div class="form-row">
    <label for="node-input-ww"><i class="fa fa-tag"></i> Bounding box Width</label>
    <input type="number" id="node-input-ww" min=1 plceholder="Optional">
  </div>
  <div class="form-row">
    <label for="node-input-hh"><i class="fa fa-tag"></i> Bounding box Height</label>
    <input type="number" id="node-input-hh" min=1 plceholder="Optional">
  </div>
  <div class="form-row">
    <label for="node-input-lineType"><i class="fa fa-tag"></i> Line type</label>
    <select id="node-input-lineType">
      <option value="4">LINE_4</option>
      <option value="8">LINE_8</option>
      <option value="16">LINE_AA</option>
    </select>
  </div>
</script>

<script type="text/html" data-help-name="draw bounding box">
  <p>Draws bounding boxes on an image.</p>
    <h3>Inputs</h3>
      <ul>
        <li>payload.img: The image on which the bounding boxes will be drawn
        <li>payload.boundingboxList or payload.boundingbox. The list of bounding boxes to draw. Each bounding box cam be represented as [[x,y], [w,h]]
        <li>payload.points: Alternative to boundingboxList. If the dimensions are the same and given, we can have just a list of points [x,y].
        <li>payload.dimensions: Optional. If the dimensions of the bounding boxes are the same, they can be given here or in the config. 
      </ul>
    <h3>Arguments</h3>
      <ul>
        <li>randColors [bool]: Use of random colors for drawing each bounding box.
        <li>color: In case randColors = False, which color to use to draw the bounding boxes.
          If a 3 channeled color is given, with a grayscale image as input, the output
          going to be 3 channeled.
        <li>thickness [int]: Must be positive
        <li>Contour width & height [int]: Optional. Only if the dimensions of the bounding boxes are the same and not given in the input, they can be given here.
        <li>line type
      </ul>
    <h3>Outputs</h3>
      <ol>
        <li>payload [img]: Grayscale, or colored in case the input image was colored,
          or a 3 channeled color was given.
      </ol>
</script>


<!--drawBBsFromPoints--
<script type="text/javascript">
  RED.nodes.registerType('draw bbs from points',{
    category: 'drawing',
    color: '#e389b9',
    defaults: {
      broker: {value:"", type:"my-mqtt-broker", required:true},
      ww : {value: "10"},
      hh : {value: "10"},
      colorVal : {value: "#000000"},
      thickness : {value: "1"}
    },
    inputs:1,
    inputLabels: "img",
    outputs:1,
    outputLabels: "",
    icon: "",
    label: function() {
      return this.name||"draw bbs from points";
    }
  });
</script>

<!--drawBBsFromPoints--
<script type="text/html" data-template-name="draw bbs from points">
  <div class="form-row">
    <label for="node-input-broker"><i class="fa fa-tag"></i> Broker</label>
    <input id="node-input-broker">
  </div>
  <div class="form-row">
    <label for="node-input-ww"><i class="fa fa-tag"></i> bb Width</label>
    <input type="number" id="node-input-ww" min=1>
  </div>
  <div class="form-row">
    <label for="node-input-hh"><i class="fa fa-tag"></i> bb Height</label>
    <input type="number" id="node-input-hh" min=1>
  </div>
  <div class="form-row">
    <label for="node-input-colorVal"><i class="fa fa-tag"></i> Color</label>
    <input type="color" id="node-input-colorVal">
  </div>
  <div class="form-row">
    <label for="node-input-thickness"><i class="fa fa-tag"></i> Line Thickness</label>
    <input type="number" id="node-input-thickness" min=1>
  </div>
</script>

<script type="text/html" data-help-name="draw bbs from points">
  <p>
    Draws bounding boxes, given a point or set of points, repsresenting the top
    left corner of each bounding box, and the width and height of the bounding
    boxes. The w and h should be the same for every bounding box.
  </p>
    <h3>Inputs</h3>
      <ul>
        <li>payload.img: The image on which the bounding boxes will be drawn
        <li>payload.bbList (or bbPoints? todo fix)
      </ul>
    <h3>Arguments</h3>
      <ul>
        <li>bb width
        <li>bb height
        <li>color: The color to use to draw the bounding boxes. If a 3 channeled
          color is given, with a grayscale image as input, the output going to
          be 3 channeled.
        <li>line thickness
      </ul>
    <h3>Outputs</h3>
      <ol>
        <li>payload [img]: Grayscale, or colored in case the input image was colored,
          or a 3 channeled color was given.
      </ol>
</script> -->

